<table class="stock">
  <tbody>
    <tr>
      <td class="symbol">
        <table class="table">
          <tr>
            <td title="5 days max" style="padding-left: 0;">{{ stock.day5Max }}</td>
            <td title="today max" style="background-color: #eee;">{{ stock.dayMax }}</td>
            <td title="20mins max">{{ stock.last5minsMax }}</td>
          </tr>
          <tr>
            <td colspan="3" style="padding-left: 0; padding-right: 0;">
              <table class="table">
                <tr>
                  <td style="padding-left: 0;">
                    {{ stock.symbol }}
                    <div class="position" *ngIf="stock.quantity">
                      {{ stock.quantity }} @ {{ stock.averageBuyPrice }}<br/>
                      held: {{ stock.heldForSells }}
                    </div>
                  </td>
                  <td style="padding-right: 0; text-align: right;">
                    <span class="aligner"></span>
                    <span class="price-percentage">
                      5days &lt; {{ stock.weekPercentage }}%
                      <br/><br/>
                      today &lt; {{ stock.dayPercentage }}%
                    </span>
                    <span class="glyphicon glyphicon-plus plus-minus"
                          [style.display]="buySellOpen ? 'none' : 'inline-block'" (click)="toggleBuySellOpen()"></span>
                    <span class="glyphicon glyphicon-minus plus-minus"
                          [style.display]="buySellOpen ? 'inline-block' : 'none'" (click)="toggleBuySellOpen()"></span>
                  </td>
                </tr>
              </table>
            </td>
          </tr>
          <tr>
            <td title="5 days min" style="padding-left: 0;">{{ stock.day5Min }}</td>
            <td title="today min" style="background-color: #eee;">{{ stock.dayMin }}</td>
            <td title="20mins min">{{ stock.last5minsMax }}</td>
          </tr>
        </table>
      </td>
      <td class="graph">
        <div style="position: relative;">
          <div class="highchart whole-day"></div>
          <div class="highchart last-minutes"></div>
          <div class="top-right"><p class="price">{{ stock.price }}</p></div>
          <div class="top-left">
            <form class="" [style.display]="buySellOpen ? 'block' : 'none'">
              <table class="table">
                <tr>
                  <td>
                    <button class="btn btn-warning btn-sm" (click)="buy()">Buy</button>
                    <input class="form-control input-sm" style="width: 3em; text-align: center;"
                           [(ngModel)]="numberOfSharesToTrade" [ngModelOptions]="{standalone: true}"/>
                  </td>
                  <td style="text-align: right;"><label>@ $</label></td>
                  <td>
                    <input class="form-control input-sm" style="width: 3.9em;" [(ngModel)]="priceToTrade"
                           [ngModelOptions]="{standalone: true}"/>
                  </td>
                  <td><button class="btn btn-primary btn-sm" (click)="sell()">Sell</button></td>
                  <td><label>Wait?</label></td>
                </tr>
                <tr>
                  <td>
                    <label>Re-sell/buy?</label>
                    <input type="checkbox" [(ngModel)]="resell" [ngModelOptions]="{standalone: true}">
                  </td>
                  <td style="text-align: right;">
                    <label [style.display]="resell ? 'inline-block' : 'none'">&plusmn; $</label>
                  </td>
                  <td>
                    <input class="form-control input-sm" style="width: 3.9em;"  [(ngModel)]="resellDelta"
                           [style.display]="resell ? 'inline-block' : 'none'" [ngModelOptions]="{standalone: true}"/>
                  </td>
                  <td></td>
                  <td><input type="checkbox" [(ngModel)]="wait" [ngModelOptions]="{standalone: true}"/></td>
                </tr>
              </table>
            </form>
          </div>
        </div>
      </td>
      <td class="orders">
        <span [class]="buildOrderClass(order)" *ngFor="let order of stock.orders">
          <span style="display: none;">state: {{ order.state }}</span>
          {{ order.createdAt }}<br/>{{ order.quantity }} @ {{ order.price }}
          <span class="glyphicon glyphicon-remove remove" (click)="hide(order)"
                [style.display]="!order.justRemoved && (order.state === 'filled') ? 'inline-block' : 'none'">
          </span>
          <span class="glyphicon glyphicon-remove cancel" (click)="cancel(order)"
                [style.display]="!order.justCancelled && (order.state !== 'filled') ? 'inline-block' : 'none'">
          </span>
        </span>
      </td>
    </tr>
  </tbody>
</table>
